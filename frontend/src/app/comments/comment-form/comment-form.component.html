<div class="root-container" cdkFocusInitial>

    <div [class.disabled]="savePending">
        
        <app-close-button
        (closed)="dialogRef.close()"
        ></app-close-button>
    
        <h3>Publish Review</h3>
        
        <br><br>
    
        <app-star-rating
        [editable]="true"
        [rate]="rate"
        (rated)="rate=$event"
        ></app-star-rating>
    
        <br>
    
        <mat-form-field appearance="outline">
            <textarea 
            matInput 
            autocomplete="off"
            [formControl]="text"
            placeholder="Enter comment..." 
            rows="4"></textarea>
        </mat-form-field>    
        
        <div *ngIf="images.length" class="image-container">
            <app-image 
            *ngFor="let image of images; let i = index"
            [image]="image.path"
            (deleted)="images.splice(i, 1)">
            </app-image>       
        </div>   
        
        <input 
        #fileInput
        type="file" 
        accept="image/*" 
        (change)="addImage(fileInput.files[0]); fileInput.value=null">    

        <br>

    </div>
        
    <app-spacer-container>
        <span>
            <button 
            *ngIf="!savePending"
            mat-raised-button 
            color="primary" 
            (click)="fileInput.click()">Add image</button>
        </span>
        <span>
            <button 
            *ngIf="!savePending"
            mat-raised-button 
            color="accent" 
            [disabled]="text.invalid" 
            (click)="save()">Save review</button>  
            <app-spinner-button *ngIf="savePending"></app-spinner-button>      
        </span>
    </app-spacer-container>         
    
</div>
